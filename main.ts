namespace SpriteKind {
    export const Rock = SpriteKind.create()
}
controller.up.onEvent(ControllerButtonEvent.Pressed, function () {
    if (gameplay) {
        if (mySprite.tileKindAt(TileDirection.Top, assets.tile`myTile0`) || mySprite.tileKindAt(TileDirection.Top, assets.tile`myTile`)) {
            mySprite.y += -16
            music.play(music.createSoundEffect(
            WaveShape.Square,
            928,
            1483,
            350,
            100,
            50,
            SoundExpressionEffect.None,
            InterpolationCurve.Linear
            ), music.PlaybackMode.UntilDone)
            move()
        }
    }
})
controller.left.onEvent(ControllerButtonEvent.Pressed, function () {
    if (gameplay) {
        if (mySprite.tileKindAt(TileDirection.Left, assets.tile`myTile0`) || mySprite.tileKindAt(TileDirection.Left, assets.tile`myTile`)) {
            mySprite.x += -16
            music.play(music.createSoundEffect(
            WaveShape.Square,
            928,
            1483,
            350,
            100,
            50,
            SoundExpressionEffect.None,
            InterpolationCurve.Linear
            ), music.PlaybackMode.UntilDone)
            move()
        }
    }
})
function updateStats () {
    textSprite2.setText("Rounds Survived: " + rSurvived)
    textSprite2.left = 0
    textSprite2.top = 0
    statusbar.bottom = 120
    statusbar.x = 80
    textSprite3.setText("Lives:" + lives)
    textSprite3.left = 0
    textSprite3.top = textSprite2.bottom
}
statusbars.onZero(StatusBarKind.Health, function (status) {
    statusbar.value = statusbar.max
    move()
})
controller.right.onEvent(ControllerButtonEvent.Pressed, function () {
    if (gameplay) {
        if (mySprite.tileKindAt(TileDirection.Right, assets.tile`myTile0`) || mySprite.tileKindAt(TileDirection.Right, assets.tile`myTile`)) {
            mySprite.x += 16
            music.play(music.createSoundEffect(
            WaveShape.Square,
            928,
            1483,
            350,
            100,
            50,
            SoundExpressionEffect.None,
            InterpolationCurve.Linear
            ), music.PlaybackMode.UntilDone)
            move()
        }
    }
})
function doPlayerCheck () {
    if (tiles.tileAtLocationEquals(mySprite.tilemapLocation(), assets.tile`transparency16`) || (tiles.tileAtLocationEquals(mySprite.tilemapLocation(), assets.tile`myTile1`) || tiles.tileAtLocationEquals(mySprite.tilemapLocation(), assets.tile`myTile3`))) {
        lives += -1
        updateStats()
        tiles.placeOnRandomTile(mySprite, assets.tile`myTile`)
        animation.runImageAnimation(
        mySprite,
        [img`
            . 7 7 . 
            7 7 7 7 
            6 7 7 6 
            8 7 7 8 
            7 7 7 7 
            7 . . 7 
            `,img`
            . . . . 
            . . . . 
            . . . . 
            . . . . 
            . . . . 
            . . . . 
            `,img`
            . 7 7 . 
            7 7 7 7 
            6 7 7 6 
            8 7 7 8 
            7 7 7 7 
            7 . . 7 
            `,img`
            . . . . 
            . . . . 
            . . . . 
            . . . . 
            . . . . 
            . . . . 
            `,img`
            . 7 7 . 
            7 7 7 7 
            6 7 7 6 
            8 7 7 8 
            7 7 7 7 
            7 . . 7 
            `,img`
            . . . . 
            . . . . 
            . . . . 
            . . . . 
            . . . . 
            . . . . 
            `,img`
            . 7 7 . 
            7 7 7 7 
            6 7 7 6 
            8 7 7 8 
            7 7 7 7 
            7 . . 7 
            `,img`
            . . . . 
            . . . . 
            . . . . 
            . . . . 
            . . . . 
            . . . . 
            `,img`
            . 7 7 . 
            7 7 7 7 
            6 7 7 6 
            8 7 7 8 
            7 7 7 7 
            7 . . 7 
            `],
        200,
        false
        )
        if (lives <= 0) {
            gameplay = false
            pause(500)
            scene.setBackgroundImage(img`
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                `)
            tiles.setCurrentTilemap(tilemap`level4`)
            sprites.destroy(mySprite)
            sprites.destroy(statusbar)
            game.showLongText("Game Over!", DialogLayout.Bottom)
            music.stopAllSounds()
            game.reset()
        }
    } else {
        rSurvived += 1
        updateStats()
    }
}
controller.down.onEvent(ControllerButtonEvent.Pressed, function () {
    if (gameplay) {
        if (mySprite.tileKindAt(TileDirection.Bottom, assets.tile`myTile0`) || mySprite.tileKindAt(TileDirection.Bottom, assets.tile`myTile`)) {
            mySprite.y += 16
            music.play(music.createSoundEffect(
            WaveShape.Square,
            928,
            1483,
            350,
            100,
            50,
            SoundExpressionEffect.None,
            InterpolationCurve.Linear
            ), music.PlaybackMode.UntilDone)
            move()
        }
    }
})
function move () {
    for (let value of tiles.getTilesByType(assets.tile`myTile`)) {
        if (Math.percentChance(30)) {
            tiles.setTileAt(value, assets.tile`myTile0`)
        }
    }
    for (let value of tiles.getTilesByType(assets.tile`myTile`)) {
        if (Math.percentChance(statusbar.value + 5)) {
            tiles.setTileAt(value, assets.tile`myTile2`)
        }
    }
    if (tiles.tileAtLocationEquals(mySprite.tilemapLocation(), assets.tile`myTile`)) {
        if (Math.percentChance(statusbar.value - 25)) {
            tiles.setTileAt(mySprite.tilemapLocation(), assets.tile`myTile2`)
        }
    }
    for (let value of tiles.getTilesByType(assets.tile`myTile0`)) {
        if (Math.percentChance(35)) {
            tiles.setTileAt(value, assets.tile`myTile`)
        }
    }
    if (tiles.tileAtLocationEquals(mySprite.tilemapLocation(), assets.tile`myTile0`)) {
        tiles.setTileAt(mySprite.tilemapLocation(), assets.tile`myTile`)
    }
    for (let value of tiles.getTilesByType(assets.tile`myTile1`)) {
        tiles.setTileAt(value, assets.tile`myTile0`)
    }
    for (let value of tiles.getTilesByType(assets.tile`myTile3`)) {
        tiles.setTileAt(value, assets.tile`myTile1`)
    }
    for (let value of tiles.getTilesByType(assets.tile`myTile2`)) {
        tiles.setTileAt(value, assets.tile`myTile3`)
    }
    statusbar.value = statusbar.max
    doPlayerCheck()
}
let gameplay = false
let mySprite: Sprite = null
let statusbar: StatusBarSprite = null
let textSprite3: TextSprite = null
let textSprite2: TextSprite = null
let lives = 0
let rSurvived = 0
game.setDialogFrame(img`
    . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . 
    . . 1 1 1 1 1 1 1 1 1 1 1 . . 
    . . 1 . . . . . . . . . 1 . . 
    . . 1 . . . . . . . . . 1 . . 
    . . 1 . . . . . . . . . 1 . . 
    . . 1 . . . . . . . . . 1 . . 
    . . 1 . . . . . . . . . 1 . . 
    . . 1 . . . . . . . . . 1 . . 
    . . 1 . . . . . . . . . 1 . . 
    . . 1 . . . . . . . . . 1 . . 
    . . 1 . . . . . . . . . 1 . . 
    . . 1 1 1 1 1 1 1 1 1 1 1 . . 
    . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . 
    `)
game.setDialogCursor(img`
    . . . . 1 
    . . . 1 1 
    . . 1 1 1 
    . 1 1 1 1 
    1 1 1 1 1 
    `)
game.setDialogTextColor(1)
if (game.ask("Do you want the tutorial?", "A = Yes   B = No")) {
    game.showLongText("Welcome to RockHop, a game of luck, logic, and skill.", DialogLayout.Bottom)
    game.showLongText("Time your jumps and plan your moves to win!", DialogLayout.Bottom)
    game.showLongText("If you do not survive a move, you lose a life.", DialogLayout.Bottom)
    game.showLongText("Use arrow keys/wasd to move around.", DialogLayout.Bottom)
    game.showLongText("Be quick! If you wait, your stone may sink.", DialogLayout.Bottom)
    game.showLongText("Each move, stones will randomly sink.", DialogLayout.Bottom)
    game.showLongText("This is affected by your jump speed.", DialogLayout.Bottom)
    game.showLongText("Don't go too fast though! You could fall.", DialogLayout.Bottom)
    game.showLongText("After a stone sinks, it will respawn in 2 moves.", DialogLayout.Bottom)
    game.showLongText("Once it respawns, it will be safe for at least 1 move.", DialogLayout.Bottom)
    game.showLongText("If you wait, the bar will run down.", DialogLayout.Bottom)
    game.showLongText("The lower it is, the more careful your jumps are.", DialogLayout.Bottom)
    game.showLongText("That decreases the chance of a stone sinking!", DialogLayout.Bottom)
    game.showLongText("This is a long tutorial, so have fun playing!", DialogLayout.Bottom)
}
music.play(music.stringPlayable("E - - C G C - - ", 400), music.PlaybackMode.InBackground)
pause(1500)
rSurvived = 0
lives = 5
scene.setBackgroundImage(img`
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444
    `)
tiles.setCurrentTilemap(tilemap`level2`)
music.play(music.melodyPlayable(music.baDing), music.PlaybackMode.InBackground)
music.play(music.createSong(hex`0050000408080205001c000f0a006400f4010a0000040000000000000000000000000000000002680100000400011d04000800012408000c0001240c001000012210001400012714001800012718001c00012520002400012024002800012228002c0001222c003000011d30003200012432003400012534003800012538003c00012440004400011d44004800012448004c0001244c005000012250005400012754005800012758005c00012560006400012064006800012268006a0001226a006c0001226c007000012770007400012474007800012078007c00011d80008400011d84008800012488008c0001248c009000012290009400012794009800012798009c000125a000a4000120a400a8000122a800ac000122ac00b000011db000b4000125b400b8000122b800bc000124c000c400011dc400c8000124c800cc000124cc00d0000122d000d4000127d400d8000127d800dc000125e000e4000120e400e6000122e600e8000122e800ec000122ec00f0000124f000f2000127f200f4000127f400f8000124f800fc00012009010e02026400000403780000040a000301000000640001c80000040100000000640001640000040100000000fa0004af00000401c80000040a00019600000414000501006400140005010000002c0104dc00000401fa0000040a0001c8000004140005d0076400140005d0070000c800029001f40105c201f4010a0005900114001400039001000005c201f4010500058403050032000584030000fa00049001000005c201f4010500058403c80032000584030500640005840300009001049001000005c201f4010500058403c80064000584030500c8000584030000f40105ac0d000404a00f00000a0004ac0d2003010004a00f0000280004ac0d9001010004a00f0000280002d00700040408070f0064000408070000c80003c800c8000e7d00c80019000e64000f0032000e78000000fa00032c01c8000ee100c80019000ec8000f0032000edc000000fa0003f401c8000ea901c80019000e90010f0032000ea4010000fa0001c8000004014b000000c800012c01000401c8000000c8000190010004012c010000c80002c800000404c8000f0064000496000000c80002c2010004045e010f006400042c010000640002c409000404c4096400960004f6090000f40102b80b000404b80b64002c0104f40b0000f401022003000004200300040a000420030000ea01029001000004900100040a000490010000900102d007000410d0076400960010d0070000c8006000800081000106880089000108900091000106980099000108a000a1000106a800a9000108b000b1000106b800b9000108c000c1000106c800c9000108d000d1000106d800d9000108e000e1000106e800e9000108f000f1000106f800f9000108`), music.PlaybackMode.LoopingInBackground)
let textSprite = textsprite.create("Start!")
textSprite.setOutline(1, 6)
textSprite.setPosition(80, -20)
textSprite.scale = 2
textSprite.vy = 100
textSprite2 = textsprite.create("")
textSprite3 = textsprite.create("")
statusbar = statusbars.create(160, 4, StatusBarKind.Health)
statusbar.setColor(7, 6)
statusbar.setBarBorder(1, 6)
updateStats()
for (let value of tiles.getTilesByType(assets.tile`myTile0`)) {
    if (Math.percentChance(35)) {
        tiles.setTileAt(value, assets.tile`myTile`)
    }
}
mySprite = sprites.create(img`
    . 7 7 . 
    7 7 7 7 
    6 7 7 6 
    8 7 7 8 
    7 7 7 7 
    7 . . 7 
    `, SpriteKind.Player)
tiles.placeOnRandomTile(mySprite, assets.tile`myTile0`)
tiles.setTileAt(mySprite.tilemapLocation(), assets.tile`myTile`)
if (mySprite.tileKindAt(TileDirection.Left, assets.tile`myTile`)) {
    tiles.setTileAt(mySprite.tilemapLocation().getNeighboringLocation(CollisionDirection.Left), assets.tile`myTile0`)
}
if (mySprite.tileKindAt(TileDirection.Right, assets.tile`myTile`)) {
    tiles.setTileAt(mySprite.tilemapLocation().getNeighboringLocation(CollisionDirection.Right), assets.tile`myTile0`)
}
if (mySprite.tileKindAt(TileDirection.Top, assets.tile`myTile`)) {
    tiles.setTileAt(mySprite.tilemapLocation().getNeighboringLocation(CollisionDirection.Top), assets.tile`myTile0`)
}
if (mySprite.tileKindAt(TileDirection.Bottom, assets.tile`myTile`)) {
    tiles.setTileAt(mySprite.tilemapLocation().getNeighboringLocation(CollisionDirection.Bottom), assets.tile`myTile0`)
}
gameplay = true
forever(function () {
    if (gameplay) {
        pause(10)
        statusbar.value += -2
    }
})
